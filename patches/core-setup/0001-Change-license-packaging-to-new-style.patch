From 0ab6bec31906e06106634a9ba3fb5e257b05955f Mon Sep 17 00:00:00 2001
From: Chris Rummel <crummel@microsoft.com>
Date: Fri, 18 Jan 2019 16:55:50 -0600
Subject: [PATCH] Change license packaging to new style.

Based on info found in https://github.com/NuGet/Home/issues/7509.
---
 src/managed/CommonManaged.props | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

diff --git a/src/managed/CommonManaged.props b/src/managed/CommonManaged.props
index a442d519..bdf38332 100644
--- a/src/managed/CommonManaged.props
+++ b/src/managed/CommonManaged.props
@@ -8,9 +8,10 @@
     <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
     <IncludeSymbols>true</IncludeSymbols>
     <Serviceable>true</Serviceable>
-    <PackageLicenseUrl>https://github.com/dotnet/core-setup/blob/master/LICENSE.TXT</PackageLicenseUrl>
     <PackageProjectUrl>https://dot.net</PackageProjectUrl>
-    <PackageLicenseFile>$(RepoRoot)LICENSE.TXT</PackageLicenseFile>
+    <PackageLicenseFile>LICENSE.TXT</PackageLicenseFile>
+    <PackageLicenseAbsoluteFile>$(RepoRoot)$(PackageLicenseFile)</PackageLicenseAbsoluteFile>
+    <NugetLicenseFile>LICENSE.TXT</NugetLicenseFile>
     <PackageThirdPartyNoticesFile>$(RepoRoot)THIRD-PARTY-NOTICES.TXT</PackageThirdPartyNoticesFile>
   </PropertyGroup>
 
@@ -40,6 +41,10 @@
              Include="$(PackageLicenseFile)">
       <PackagePath />
     </Content>
+    <Content Condition="Exists('$(PackageLicenseAbsoluteFile)')"
+             Include="$(PackageLicenseAbsoluteFile)">
+      <PackagePath />
+    </Content>
     <Content Condition="Exists('$(PackageThirdPartyNoticesFile)')"
              Include="$(PackageThirdPartyNoticesFile)">
       <PackagePath />
@@ -47,4 +52,4 @@
   </ItemGroup>
 
   <Import Condition="Exists('$(ToolsDir)versioning.props')" Project="$(ToolsDir)versioning.props" />
-</Project>
\ No newline at end of file
+</Project>
-- 
2.18.0

